<!--voter_analytics/show_all_voters.html-->
<!--Aidan Xu (axu26@bu.edu), 10/30/25-->
<!--The page that will show a list of all voters paginated.-->

{% extends 'voter_analytics/base.html' %}
{% load static %}

{% block content %}
    <div class="voters_list">
        <!--show the form for search on the left-->
        {% include 'voter_analytics/search.html' %}
        <!--the actual information list we are displaying-->
        <div class="list">
            <div style="text-align: center;">
                <br>
                <!--check if we are using pagination (we are)-->
                {% if is_paginated %}
                    <!--if there is a previous page, give option to go back-->
                    {% if page_obj.has_previous %}
                        <!--this line is long, i cannot put newlines lest it breaks-->
                        <!--make sure to pass all parameters in request.GET into url-->
                        <a href="?page={{ page_obj.previous_page_number }}{% for key, value in request.GET.items %}{% if key != 'page' %}&{{key}}={{value|urlencode}}{% endif %}{% endfor %}"><</a>
                    {% endif %}
                    <span>{{ page_obj.number }} / {{ page_obj.paginator.num_pages }}</span>
                    <!--if there is a next page, give option to go next-->
                    {% if page_obj.has_next %}
                        <!--make sure to pass all parameters in request.GET into url-->
                        <a href="?page={{ page_obj.next_page_number }}{% for key, value in request.GET.items %}{% if key != 'page' %}&{{key}}={{value|urlencode}}{% endif %}{% endfor %}">></a>
                    {% endif %}
                {% endif %}
            </div>
            <table class="voters">
                <tr>
                    <th>Name</th>
                    <th>Address</th>
                    <th>Date of Birth</th>
                    <th>Party</th>
                    <th>Voter Score</th>
                </tr>
                <!--go through the queryset of voters and display their info-->
                {% for voter in voters %}
                    <tr>
                        <td>
                            <a href="{% url 'voter' voter.pk %}">
                                {{voter.first_name}} {{voter.last_name}}
                            </a>
                        </td>
                        <td>{{voter.full_address}}</td>
                        <td>{{voter.date_of_birth}}</td>
                        <td>{{voter.party_affiliation}}</td>
                        <td>{{voter.voter_score}}</td>
                    </tr>
                {% endfor %}
            </table>
        </div>
    </div>
{% endblock %}